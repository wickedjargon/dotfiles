#!/bin/sh

# Get first Wi-Fi interface
WIFI_DEV=$(ls -d /sys/class/net/w* 2>/dev/null | grep -E '/sys/class/net/w.*' | head -n1 | xargs basename)
if [ -n "$WIFI_DEV" ] && [ "$(cat /sys/class/net/$WIFI_DEV/operstate)" = "up" ]; then
    WIFI_SIGNAL=$(awk -v dev="$WIFI_DEV" '$1 ~ dev { print int($3 * 100 / 70) }' /proc/net/wireless)
    WIFI_ICON="üì∂ $WIFI_SIGNAL%"
else
    WIFI_ICON=""
fi

# Get first Ethernet interface
ETH_DEV=$(ls -d /sys/class/net/e* 2>/dev/null | grep -E '/sys/class/net/e.*' | head -n1 | xargs basename)
if [ -n "$ETH_DEV" ] && [ "$(cat /sys/class/net/$ETH_DEV/operstate)" = "up" ]; then
    ETH_ICON="üåê ETH"
else
    ETH_ICON=""
fi

# Print result, removing extra spaces
echo "$WIFI_ICON $ETH_ICON" | sed 's/  / /g' | sed 's/^ //;s/ $//'
